<!DOCTYPE html>
<html><head><link href="css/default.css" rel="stylesheet" type="text/css"><script src="js/jquery.min.js" type="text/javascript"></script><script src="js/page_effects.js" type="text/javascript"></script><title>clj-span.models.sediment documentation</title></head><body><div id="header"><h2>Generated by <a href="https://github.com/weavejester/codox">Codox</a></h2><h1><a href="index.html">Clj-span 1.0.0-SNAPSHOT API documentation</a></h1></div><div class="sidebar" id="namespaces"><h3><span>Namespaces</span></h3><ul><li><a href="clj-misc.matrix-ops.html"><span>clj-misc.matrix-ops</span></a></li><li><a href="clj-misc.memtest.html"><span>clj-misc.memtest</span></a></li><li><a href="clj-misc.numbers.html"><span>clj-misc.numbers</span></a></li><li><a href="clj-misc.point-algebra.html"><span>clj-misc.point-algebra</span></a></li><li><a href="clj-misc.randvars.html"><span>clj-misc.randvars</span></a></li><li><a href="clj-misc.stats.html"><span>clj-misc.stats</span></a></li><li><a href="clj-misc.utils.html"><span>clj-misc.utils</span></a></li><li><a href="clj-misc.varprop.html"><span>clj-misc.varprop</span></a></li><li><a href="clj-span.agents.html"><span>clj-span.agents</span></a></li><li><a href="clj-span.analyzer.html"><span>clj-span.analyzer</span></a></li><li><a href="clj-span.aries-span-bridge.html"><span>clj-span.aries-span-bridge</span></a></li><li><a href="clj-span.commandline.html"><span>clj-span.commandline</span></a></li><li><a href="clj-span.core.html"><span>clj-span.core</span></a></li><li><a href="clj-span.gui.html"><span>clj-span.gui</span></a></li><li><a href="clj-span.gui-simple.html"><span>clj-span.gui-simple</span></a></li><li><a href="clj-span.interface.html"><span>clj-span.interface</span></a></li><li><a href="clj-span.java-span-bridge.html"><span>clj-span.java-span-bridge</span></a></li><li><a href="clj-span.model-lang.html"><span>clj-span.model-lang</span></a></li><li><a href="clj-span.models.carbon.html"><span>clj-span.models.carbon</span></a></li><li><a href="clj-span.models.coastal-storm-protection.html"><span>clj-span.models.coastal-storm-protection</span></a></li><li><a href="clj-span.models.flood-water.html"><span>clj-span.models.flood-water</span></a></li><li><a href="clj-span.models.jgrass-water-routing.html"><span>clj-span.models.jgrass-water-routing</span></a></li><li><a href="clj-span.models.line-of-sight.html"><span>clj-span.models.line-of-sight</span></a></li><li><a href="clj-span.models.proximity.html"><span>clj-span.models.proximity</span></a></li><li class="current"><a href="clj-span.models.sediment.html"><span>clj-span.models.sediment</span></a></li><li><a href="clj-span.models.subsistence-fisheries.html"><span>clj-span.models.subsistence-fisheries</span></a></li><li><a href="clj-span.models.surface-water.html"><span>clj-span.models.surface-water</span></a></li><li><a href="clj-span.models.surface-water-stupid.html"><span>clj-span.models.surface-water-stupid</span></a></li><li><a href="clj-span.models.surface-water-topologic.html"><span>clj-span.models.surface-water-topologic</span></a></li><li><a href="clj-span.repl-utils.html"><span>clj-span.repl-utils</span></a></li><li><a href="clj-span.thinklab-monitor.html"><span>clj-span.thinklab-monitor</span></a></li><li><a href="clj-span.worldgen.html"><span>clj-span.worldgen</span></a></li></ul></div><div class="sidebar" id="vars"><h3>Public Vars</h3><ul><li><a href="clj-span.models.sediment.html#var-calculate-sink%21"><span>calculate-sink!</span></a></li><li><a href="clj-span.models.sediment.html#var-compute-floodplain-activation-factors"><span>compute-floodplain-activation-factors</span></a></li><li><a href="clj-span.models.sediment.html#var-compute-ha-per-cell"><span>compute-ha-per-cell</span></a></li><li><a href="clj-span.models.sediment.html#var-create-feature-tests"><span>create-feature-tests</span></a></li><li><a href="clj-span.models.sediment.html#var-link-streams-to-sinks"><span>link-streams-to-sinks</span></a></li><li><a href="clj-span.models.sediment.html#var-make-buckets"><span>make-buckets</span></a></li><li><a href="clj-span.models.sediment.html#var-propagate-sediment%21"><span>propagate-sediment!</span></a></li><li><a href="clj-span.models.sediment.html#var-to-the-ocean%21"><span>to-the-ocean!</span></a></li></ul></div><div class="namespace-docs" id="content"><h2>clj-span.models.sediment documentation</h2><pre class="doc"></pre><div class="public" id="var-calculate-sink%21"><h3>calculate-sink!</h3><div class="usage"><code>(calculate-sink! actual-weight sink-cap-ref)</code></div><pre class="doc">Computes the amount sunk by each sink encountered along an
out-of-stream flow path. Reduces the sink-caps for each sink which
captures some of the service medium. Returns remaining
actual-weight and the local sink effects.</pre></div><div class="public" id="var-compute-floodplain-activation-factors"><h3>compute-floodplain-activation-factors</h3><div class="usage"><code>(compute-floodplain-activation-factors {:keys [in-floodplain? stream-intakes], :as params})</code></div><pre class="doc">Stores a map under (params :sink-AFs) of {floodplain-sink-ids -&gt; AF}, where AF
is a number between 0.0 and 1.0, representing the sink-id's
relative position between the stream edge (1.0) and the floodplain
boundary (0.0).</pre></div><div class="public" id="var-compute-ha-per-cell"><h3>compute-ha-per-cell</h3><div class="usage"><code>(compute-ha-per-cell {:keys [cell-width cell-height], :as params})</code></div><pre class="doc">Stores cell-width * cell-height * 10^-4 under (params :ha-per-cell).
</pre></div><div class="public" id="var-create-feature-tests"><h3>create-feature-tests</h3><div class="usage"><code>(create-feature-tests {:keys [use-points flow-layers], :as params})</code></div><pre class="doc">Stores sets in params map of all use, levee, river, and floodplain ids under :use-id?, :levee?, :in-stream?, and :in-floodplain?
</pre></div><div class="public" id="var-link-streams-to-sinks"><h3>link-streams-to-sinks</h3><div class="usage"><code>(link-streams-to-sinks {:keys [levee? in-stream? in-floodplain? rows cols sink-points], :as params})</code></div><pre class="doc">Stores a map of {stream-ids -&gt; nearest-floodplain-sink-ids} under (params :stream-intakes).
</pre></div><div class="public" id="var-make-buckets"><h3>make-buckets</h3><div class="usage"><code>(make-buckets {:keys [sink-layer sink-points sink-AFs stream-intakes in-floodplain? ha-per-cell], :as params})</code></div><pre class="doc">Stores maps from {ids -&gt; tons-ref} for overland-sink-caps and floodplain-sink-caps in params.
</pre></div><div class="public" id="var-propagate-sediment%21"><h3>propagate-sediment!</h3><div class="usage"><code>(propagate-sediment! params)</code></div><pre class="doc">Constructs a sequence of sediment-carrier objects (one per
in-stream source id) and then iteratively propagates them downhill
until they run out of sediment, reach a stream location, get stuck
in a low elevation point, or fall off the map bounds. Once they
reach a stream location, the carriers will attempt to continue
downhill while staying in a stream course. All the carriers are
moved together in timesteps (more or less).</pre></div><div class="public" id="var-to-the-ocean%21"><h3>to-the-ocean!</h3><div class="usage"><code>(to-the-ocean! {:keys [floodplain-sink-caps overland-sink-caps], :as params} {:keys [route stream-bound?], :as sediment-carrier})</code></div><pre class="doc">Computes the state of the sediment-carrier after it takes another
step downhill. If it encounters a sink location, it drops some
sediment according to the remaining sink capacity at this location.
If it encounters a use location, a service-carrier is stored in the
user's carrier-cache.</pre></div></div></body></html>